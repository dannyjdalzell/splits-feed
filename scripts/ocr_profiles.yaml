common:
  time_tolerance_minutes: 15
  percent_tokens: ["% Bets","Bets %","Tickets %","Ticket %","% Handle","Handle %","% Bet","%Handle"]
  market_tokens:
    moneyline:  ["Moneyline","ML","Money","Money Line"]
    spread:     ["Spread","Point Spread","Runline","Puck Line","RL","PL","Handicap"]
    total:      ["Total","Totals","O/U","Over/Under","Over Under","OU"]
families:
  DK_FAM:       { detect_any: ["DraftKings","DRAFTKINGS","DK","Bets %","Handle %"] }
  FD_FAM:       { detect_any: ["FanDuel","FANDUEL","FD Sportsbook","Bets %","Handle %"] }
  CIRCA_FAM:    { detect_any: ["Circa Sports","CIRCA SPORTS","Expanded Splits","Moneyline"] }
  MGM_FAM:      { detect_any: ["BetMGM","MLB Games","Opening","Current","%Bets","%Handle"] }
  CAESARS_FAM:  { detect_any: ["Caesars Sportsbook","Caesars","% Bets","% Handle"] }
  SUPERBOOK_FAM:{ detect_any: ["SuperBook","Westgate","% Bets","% Handle"] }
  BRACCO_FAM:   { detect_any: ["Betting Splits","Bracco","% Bets","% Handle"] }
  BOL_FAM:      { detect_any: ["BetOnline","BOL","Dave Mason","% Bets","% Handle"] }
  COVERS_FAM:   { detect_any: ["Covers","Covers.com","Consensus"] }
# --- Circa Sports tweet grid ---
- name: CIRCA_FAM
  match:
    any_text:
      - "Circa Sports"
      - "SPORTSBOOK Betting Splits"
      - "Betting Splits Expanded Splits"
  table:
    find_headers:
      - ["Money", "Spread", "Total"]
      - ["Handle", "Bets"]
    columns:
      away_team:  ["team","away","matchup","visitor"]
      home_team:  ["team","home"]
      market:     ["market","type"]
      tickets_pct:["bets","tickets","% bets","bets%"]
      handle_pct: ["handle","% handle","handle%"]
      line:       ["line","odds","price","spread","ml","total"]
  normalize:
    market_map:
      ML:     ["money","moneyline","ml"]
      Spread: ["spread","sp","rl"]
      Total:  ["total","o/u","ou","tot"]

# --- Bracco grid ---
- name: BRACCO_FAM
  match:
    any_text:
      - "BRACCO"
      - "Betting Splits"
  table:
    find_headers:
      - ["Money", "Spread", "Total"]
      - ["Handle", "Bets"]
    columns:
      away_team:  ["team","away","matchup","visitor"]
      home_team:  ["team","home"]
      market:     ["market","type"]
      tickets_pct:["bets","tickets","% bets","bets%"]
      handle_pct: ["handle","% handle","handle%"]
      line:       ["line","odds","price","spread","ml","total"]
  normalize:
    market_map:
      ML:     ["money","moneyline","ml"]
      Spread: ["spread","sp","rl"]
      Total:  ["total","o/u","ou","tot"]
  CIRCA_FAM:
    match:
      header_text:
        - "Circa"
        - "CIRCA"
    normalize:
      tickets_pct: ["bets", "% bets", "tickets", "bets%"]
      handle_pct:  ["handle", "% handle", "handle%"]
      line:        ["line", "odds", "price", "spread", "ml", "total"]
    market_map:
      "ML":     ["money", "moneyline", "ml"]
      "Spread": ["spread", "sp", "rl"]
      "Total":  ["total", "o/u", "ou", "tot"]

  BRACCO_FAM:
    match:
      header_text:
        - "BRACCO"
        - "Bracco"
    normalize:
      tickets_pct: ["bets", "% bets", "tickets", "bets%"]
      handle_pct:  ["handle", "% handle", "handle%"]
      line:        ["line", "odds", "price", "spread", "ml", "total"]
    market_map:
      "ML":     ["money", "moneyline", "ml"]
      "Spread": ["spread", "sp", "rl"]
      "Total":  ["total", "o/u", "ou", "tot"]

  FANDUEL_FAM:
    match:
      header_text:
        - "FanDuel"
        - "FANDUEL"
    normalize:
      tickets_pct: ["bets", "% bets", "tickets", "bets%"]
      handle_pct:  ["handle", "% handle", "handle%"]
      line:        ["line", "odds", "price", "spread", "ml", "total"]
    market_map:
      "ML":     ["money", "moneyline", "ml"]
      "Spread": ["spread", "sp", "rl"]
      "Total":  ["total", "o/u", "ou", "tot"]

  XYZ_FAM:
    match:
      header_text:
        - "Sportsbook"
        - "Betting Splits"
    normalize:
      tickets_pct: ["bets", "% bets", "tickets", "bets%"]
      handle_pct:  ["handle", "% handle", "handle%"]
      line:        ["line", "odds", "price", "spread", "ml", "total"]
    market_map:
      "ML":     ["money", "moneyline", "ml"]
      "Spread": ["spread", "sp", "rl"]
      "Total":  ["total", "o/u", "ou", "tot"]
